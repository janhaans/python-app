name: Test ARC Runner

on:
  workflow_dispatch:

jobs:
  test:
    runs-on: arc-runner-set
    steps:
      - name: Install kubectl
        run: |
          curl -LO "https://dl.k8s.io/release/$(curl -L -s https://dl.k8s.io/release/stable.txt)/bin/linux/arm64/kubectl"
          chmod +x kubectl
          sudo mv kubectl /usr/local/bin/
          kubectl version --client
      
      - name: Test runner
        run: |
          echo "Hello from ARC runner!"
          echo "Current context: $(kubectl config current-context)"
          kubectl get nodes
          kubectl get pods -n arc-runners